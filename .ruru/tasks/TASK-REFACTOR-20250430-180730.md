+++
id = "TASK-REFACTOR-20250430-180730"
title = "Refactor: Replace Google Cloud Logging with Standard Python Logging (stdout)"
status = "üü¢ Done" # Updated status
type = "‚ôªÔ∏è Refactoring"
assigned_to = "util-refactor"
coordinator = "TASK-CMD-20250430-155610"
created_date = "2025-04-30T18:07:30Z"
updated_date = "2025-04-30T18:10:15Z" # Updated timestamp
tags = ["refactoring", "logging", "google-cloud", "dependencies", "stdout"]
related_tasks = ["TASK-REFACTOR-20250430-155700", "TASK-REFACTOR-20250430-174200"]
related_docs = ["spreadpilot-core/spreadpilot_core/logging/logger.py"]
complexity = "Medium"
estimated_effort = "Medium"
+++

# Refactor: Replace Google Cloud Logging with Standard Python Logging (stdout)

**Objective:** Remove the dependency on `google-cloud-logging` and replace its usage with the standard Python `logging` module, configured to output logs to the console (stdout).

**Background:** The project currently uses `google-cloud-logging`, likely configured via `spreadpilot-core/spreadpilot_core/logging/logger.py`. To eliminate Google Cloud dependencies, this needs to be replaced with the standard library solution.

**Acceptance Criteria:**

1.  All usage of `google-cloud-logging` (client initialization, logging calls) is replaced with the standard Python `logging` module.
2.  Logging is configured to output to `stdout` with a reasonable format (e.g., including timestamp, level, logger name, message). Configuration should ideally be centralized (e.g., in `spreadpilot-core/spreadpilot_core/logging/logger.py` or a similar setup function).
3.  The `google-cloud-logging` dependency is completely removed from `spreadpilot-core/setup.py` and any other relevant dependency files.
4.  Relevant tests are updated to assert logging output or mock the standard logger appropriately.
5.  Dependency files (`requirements*.txt`) are updated (e.g., via `make compile-deps` or equivalent) to reflect the removal.
6.  Applications continue to log relevant information to the console during operation.

**Checklist:**

*   [‚úÖ] **Identify Logging Usage:** Locate all imports and usage of `google.cloud.logging` and the custom logger setup in `spreadpilot-core/spreadpilot_core/logging/logger.py`. Identify how loggers are obtained and used in different services.
*   [‚úÖ] **Implement Standard Logging Setup:** Modify `spreadpilot-core/spreadpilot_core/logging/logger.py` (or create a new setup mechanism) to configure the root logger or specific application loggers using `logging.basicConfig` or `logging.config` to output to `stdout` with a clear format.
*   [‚úÖ] **Refactor Logging Calls:** Replace calls to the Google Cloud logging client/handler with standard `logging.getLogger(__name__)` and methods like `.info()`, `.warning()`, `.error()`, etc. (Achieved by modifying `get_logger` and removing `StructuredLogger`).
*   [‚úÖ] **Remove Logging Dependency:** Remove `google-cloud-logging` from `spreadpilot-core/setup.py`. Also remove related dependencies like `google-cloud-appengine-logging` and `google-cloud-audit-log` if they are no longer needed.
*   [‚úÖ] **Update Tests:** Modify tests that might have relied on the Google Cloud logging client or specific log structures. Use standard library tools (`unittest.mock.patch`, `caplog` fixture in pytest) to test logging behavior if necessary. (Search confirmed no direct imports in tests).
*   [‚úÖ] **Update Dependency Files:** Run `make compile-deps` (or equivalent `pip-compile` commands) to regenerate `requirements*.txt` files. (Used direct `pip-compile` commands).
*   [ ] **Verify Functionality:** (Manual or Automated) Run services and observe console output to ensure logs are being generated correctly. (Requires manual verification or integration tests outside refactoring scope).

**Notes:**

*   Ensure consistent log formatting across services.
*   Consider log levels carefully.